wp.customize.controlConstructor["kirki-editor"]=wp.customize.Control.extend({ready:function(){"use strict";var i,e,t=this,r=t.container.find("textarea"),o=t.container.find(".toggle-editor"),n=(jQuery("#kirki_editor_pane"),jQuery("#kirki_editor_pane textarea.wp-editor-area"));jQuery(window).load((function(){var s=tinyMCE.get("kirki-editor");o.html(window.kirki.l10n[t.params.kirkiConfig]["open-editor"]),o.on("click",(function(){t.toggleEditor(),t.changeButton(),t.setEditorContent(s),t.previewHeight()})),s&&s.onChange.add((function(o,n){o.save(),e=s.getContent(),clearTimeout(i),i=setTimeout((function(){r.val(e).trigger("change"),wp.customize.instance(t.getEditorWrapperSetting()).set(e)}),500)})),n.on("change keyup paste",(function(){wp.customize.instance(t.getEditorWrapperSetting()).set(jQuery(this).val())}))}))},changeButton:function(){"use strict";var i=this;jQuery("#kirki_editor_pane");jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n[i.params.kirkiConfig]["switch-editor"]),!1!==i.getEditorWrapperSetting()?(jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n[i.params.kirkiConfig]["switch-editor"]),jQuery("#customize-control-"+i.getEditorWrapperSetting()+" .toggle-editor").html(window.kirki.l10n[i.params.kirkiConfig]["close-editor"])):jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n[i.params.kirkiConfig]["open-editor"])},toggleEditor:function(){"use strict";var i=this,e=jQuery("#kirki_editor_pane");i.getEditorWrapperSetting()&&i.id===i.getEditorWrapperSetting()?(e.removeClass(),e.addClass("hide")):(e.removeClass(),e.addClass(i.id))},setEditorContent:function(i){"use strict";jQuery("#kirki_editor_pane");i.setContent(this.setting._value)},getEditorWrapperSetting:function(){"use strict";return!jQuery("#kirki_editor_pane").hasClass("hide")&&(!!jQuery("#kirki_editor_pane").attr("class")&&jQuery("#kirki_editor_pane").attr("class"))},previewHeight:function(){jQuery("#kirki_editor_pane").hasClass("hide")?jQuery("#customize-preview").hasClass("is-kirki-editor-open")&&jQuery("#customize-preview").removeClass("is-kirki-editor-open"):jQuery("#customize-preview").hasClass("is-kirki-editor-open")||jQuery("#customize-preview").addClass("is-kirki-editor-open")}});
